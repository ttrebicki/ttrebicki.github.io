<!doctype html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Wpinka</title>
</head>
<body>
    <a href="https://ttrebicki.github.io/wpinka_local.html">BUTTON</a>
    
<script type="text/javascript">
 window.addEventListener('message', (event) => {
    if (typeof window.dataLayer === 'undefined') {
        const dataLayer = []
    }

    if (typeof event.data === 'object') {
        dataLayer.push(JSON.parse(event.data));
    }
});  
      window.addEventListener("DOMContentLoaded", function () {
        const iframeContainer = document.getElementById('going_frame');
        const loadingElement = document.createElement("div");

        if (document.getElementById("loading-element")) {
          return;
        }

        loadingElement.innerHTML = `
          <h2 id="loading-prompt">Trwa ładowanie formularza sprzedaży.</h2>
          <h3>Formularz nie działa? Kup bilety w <a href="https://goingapp.pl/" rel="dofollow">Going.</a></h3>
        `;
        loadingElement.id = "loading-element";
        loadingElement.style.fontFamily = "Helvetica, sans-serif";
        loadingElement.style.textAlign = "center";
        loadingElement.style.padding = "16px";

        if (iframeContainer) {
          iframeContainer.append(loadingElement);
        }
      });
    

  (function (G, o, i, n, g) {
  G.going =
    G.going ||
    function () {
      [].push.apply((G.goingQ = G.goingQ || []), arguments);
    };
  G.goingSettings = { gv: '1.0.7' };
  n = o.getElementsByTagName('head')[0];
  g = o.createElement('script');
  g.async = true;
  g.src = i + '?gv=' + G.goingSettings.gv;
  n.appendChild(g);
})(window, document, 'https://places-script.goingapp.pl/script.js');
window.addEventListener('message', (event) => {
        if (
          document.getElementById("loading-prompt") &&
          document.getElementById('going_frame')
        ) {
          document.getElementById("loading-prompt")?.remove();
          document
            .getElementById('going_frame')
            .append(document.getElementById("loading-element"));
        }
      });
going(
{
    type: 'SET_PARENT',
    payload: 'going_frame',
},
{
    type: 'SET_APP_URL',
    payload: 'https://goingapp.develop.goingapp.eu/buy-happening/mati-test-2',
},
{
    type: 'GET_ERROR_FROM_URL',
    payload: 'error',
},
{
    type: 'SET_CURRENT_URL',
    payload: window.location.href
},
{
    type: 'GET_TRANSACTION_FROM_URL',
    payload: 'transactionId'
},
{
    type: "SET_LANGUAGE",
    payload: 'pl',
 },


         {
          type: "SET_FB_PIXEL_KEY",
          payload: '1195662594662472',
        },
        
)
if (window.location.href.includes("transactionId")) {
  document.getElementById("loading-element").remove();
}

</script>
    <div id="going_frame"></div>
</body>
</html>
